<form [formGroup]="form" class="form">
  <mat-form-field class="header">
    <mat-label>Заголовок</mat-label>
    <textarea
      formControlName="header"
      cdkTextareaAutosize
      #autosize="cdkTextareaAutosize"
      cdkAutosizeMinRows="1"
      cdkAutosizeMaxRows="5"
      matInput
    ></textarea>
  </mat-form-field>

  <img src="assets/logo.png" class="logo" alt="" />

  <mat-form-field class="protocol">
    <mat-label>Протокол</mat-label>
    <textarea
      formControlName="protocol"
      cdkTextareaAutosize
      matInput
      #autosize="cdkTextareaAutosize"
      cdkAutosizeMinRows="1"
      cdkAutosizeMaxRows="5"
    ></textarea>
  </mat-form-field>
  <button (click)="openDialog()" style="margin-bottom: 8px" mat-raised-button>
    Редагувати Присутніх
  </button>
  <mat-form-field appearance="fill">
    <mat-label>Присутні:</mat-label>
    <mat-select formControlName="people" multiple>
      <app-select-all [model]="$any(form).controls['people']" [values]="people">
      </app-select-all>
      <mat-option *ngFor="let person of people" [value]="person">{{
        person
      }}</mat-option>
    </mat-select>
  </mat-form-field>
  <p>Порядок денний:</p>
  <ng-container formArrayName="agenda">
    <ng-container
      *ngFor="let agendaForm of agendaPoints.controls; let i = index"
    >
      <div [formGroup]="$any(agendaForm)" class="point">
        <span class="counter">{{ i + 1 }}.</span>
        <mat-form-field style="min-width: 300px" appearance="fill">
          <mat-label>Подія</mat-label>
          <mat-select formControlName="keyword">
            <mat-option *ngFor="let keyword of keywords" [value]="keyword">{{
              keyword
            }}</mat-option>
          </mat-select>
        </mat-form-field>
        <mat-form-field appearance="fill">
          <mat-label>Громадянство</mat-label>
          <mat-select formControlName="nationality">
            <mat-option
              *ngFor="let nationality of nationalities"
              [value]="nationality"
              >{{ nationality }}</mat-option
            >
          </mat-select>
        </mat-form-field>
        <mat-form-field appearance="fill">
          <mat-label>Форма навчання</mat-label>
          <mat-select formControlName="formOfEducation">
            <mat-option
              *ngFor="let formOfEducation of formsOfEducation"
              [value]="formOfEducation"
              >{{ formOfEducation }}</mat-option
            >
          </mat-select>
        </mat-form-field>
        <mat-form-field appearance="fill">
          <mat-label>База вступу</mat-label>
          <mat-select formControlName="entryBase">
            <mat-option
              *ngFor="let entryBase of entryBases"
              [value]="entryBase"
              >{{ entryBase }}</mat-option
            >
          </mat-select>
        </mat-form-field>
        <mat-form-field appearance="fill">
          <mat-label>Освітній ступінь</mat-label>
          <mat-select formControlName="educationDegree">
            <mat-option
              *ngFor="let educationDegree of educationDegrees"
              [value]="educationDegree"
              >{{ educationDegree }}</mat-option
            >
          </mat-select>
        </mat-form-field>

        <button
          mat-icon-button
          matSuffix
          [disabled]="agendaPoints.length === 1"
          (click)="deleteAgendaPoint(i)"
        >
          <mat-icon>delete_forever</mat-icon>
        </button>
      </div>
      <mat-card class="agenda">
        <mat-card-content>
          <span>{{ getAgendaValue($any(agendaForm)) }}</span></mat-card-content
        >
      </mat-card>
    </ng-container>
  </ng-container>
  <button mat-raised-button color="secondary" (click)="addAgendaPoint()">
    Додати пункт
  </button>
  <br />
  <p>Вирішили:</p>
  <ng-container formArrayName="decision">
    <ng-container
      *ngFor="let decisionForm of decisionPoints.controls; let i = index"
    >
      <div class="point">
        <span class="counter">{{ i + 1 }}.</span>

        <div [formGroup]="$any(decisionForm)" class="point">
          <span class="counter">{{ i + 1 }}.</span>
          <mat-form-field style="min-width: 300px" appearance="fill">
            <mat-label>Подія</mat-label>
            <mat-select formControlName="keyword">
              <mat-option *ngFor="let keyword of keywords" [value]="keyword">{{
                keyword
              }}</mat-option>
            </mat-select>
          </mat-form-field>
          <mat-form-field appearance="fill">
            <mat-label>Громадянство</mat-label>
            <mat-select formControlName="nationality">
              <mat-option
                *ngFor="let nationality of nationalities"
                [value]="nationality"
                >{{ nationality }}</mat-option
              >
            </mat-select>
          </mat-form-field>
          <mat-form-field appearance="fill">
            <mat-label>Форма навчання</mat-label>
            <mat-select formControlName="formOfEducation">
              <mat-option
                *ngFor="let formOfEducation of formsOfEducation"
                [value]="formOfEducation"
                >{{ formOfEducation }}</mat-option
              >
            </mat-select>
          </mat-form-field>
          <mat-form-field appearance="fill">
            <mat-label>База вступу</mat-label>
            <mat-select formControlName="entryBase">
              <mat-option
                *ngFor="let entryBase of entryBases"
                [value]="entryBase"
                >{{ entryBase }}</mat-option
              >
            </mat-select>
          </mat-form-field>
          <mat-form-field appearance="fill">
            <mat-label>Освітній ступінь</mat-label>
            <mat-select formControlName="educationDegree">
              <mat-option
                *ngFor="let educationDegree of educationDegrees"
                [value]="educationDegree"
                >{{ educationDegree }}</mat-option
              >
            </mat-select>
          </mat-form-field>
        </div>
      </div>
      <mat-card class="agenda">
        <mat-card-content>
          <span>{{
            getDecisionValue($any(decisionForm))
          }}</span></mat-card-content
        >
      </mat-card>
    </ng-container>
  </ng-container>
  <br />
  <div
    style="
      display: flex;
      flex-direction: row;
      justify-content: space-between;
      width: 100%;
    "
  >
    <mat-form-field style="width: auto" appearance="fill">
      <mat-label>Ректор</mat-label>
      <mat-select formControlName="rector">
        <mat-option *ngFor="let person of people" [value]="person">{{
          person
        }}</mat-option>
      </mat-select>
    </mat-form-field>
    <mat-form-field style="width: auto" appearance="fill">
      <mat-label>Відповідальний секретар ПК</mat-label>
      <mat-select formControlName="secretar">
        <mat-option *ngFor="let person of people" [value]="person">{{
          person
        }}</mat-option>
      </mat-select>
    </mat-form-field>
  </div>
</form>
<div
  class="preview-btn"
  matTooltip="Заповніть обов'язкові поля"
  [matTooltipDisabled]="form.valid"
>
  <button
    (click)="onPreviewClick()"
    [disabled]="form.invalid"
    mat-raised-button
  >
    Превью
  </button>
</div>
